---
title: 1-redis高可用服务缓存架构
date: 2100-01-01 08:08:08
tags: 
categories: redis
---


## 1. 高并发、高可用复杂系统中的缓存架构有哪些东西？
1. 复杂的缓存架构需要支撑高并发、高可用

## 2. 课程内容-商品详情页的架构？
1. 商品详情页系统架构 -> 缓存架构 -> 高并发技术+解决方案+架构 -> 高可用技术+解决方案+架构

## 3. 小型电商网站的商品详情页的页面静态化架构及其缺陷？
1. 商品详情页的系统架构 -> 缓存架构 -> 高并发 -> 高可用
	小型电商网站架构方案：页面静态化的方案
	html模板页面：
	```
	<html>
		<title>
			<style css>
			<javascript>
		</title>
		<body>
			商品名称：#{productName}
			商品价格：#{productPrice}
			商品描述：#{productDesc}
		</body>
	</html>
	```
	数据存在数据库中 -> 模板的渲染
	```
	<html>
		<title>
			<style css>
			<javascript>
		</title>
		<body>
			商品名称：iphon7 plus（玫瑰）
			商品价格：5299.50	
			商品描述：这是最好的手机，大降价了
		</body>
	</html>
	```
	模板改变了，这个模板对应的所有数据，全部重新渲染一遍。小网站，页面很少，很实用，非常简单。
	大网站，模板上亿，重新渲染，不靠谱。
	
![3-小型电商静态化架构](3-小型电商静态化架构.png '小型电商静态化架构')
	
## 4. 大型电商网站的异步多级缓存构建+nginx数据本地化动态渲染的架构
	

![4-大型电商网站的详情页架构](4-大型电商网站的详情页架构.png '大型电商网站的详情页架构')
	
	架构解析：
	
	1. 用户访问页面
	
	2. nignx服务器
		2.1 nignx服务器从本地获取数据，如果获取到，渲染html模板；
		没有，执行第3步；
	
	3. redis集群
		3.1 redis集群从本地获取数据，如果获取到，返回给nignx服务器，nignx服务器将数据写入本地缓存；
		没有，执行第4步；
		
	4. ehcache缓存
		4.1 ehcache缓存从本地获取数据，如果获取到，返回给redis集群，redis集群写入本地；
			redis集群将数据返回给nignx服务器，nignx服务器将数据写入本地缓存；
			没有，执行第5步；
	
	5. 去源头获取数据，再一步一步往回执行，写入本地。
	
--------
## 5. redis的重要性--首先要掌握redis
	支撑高并发、高可用、海量数据、备份恢复的redis的重要性
	1. redis架构支持高并发、高可用、海量数据、备份并随时可以恢复。
	
	2. 解决各种各样高并发场景下的缓存面临的难题，缓存架构中不断的引入各种解决方案和技术，解决高并发的问题

	3. 解决各种各样缓存架构本身面临的高可用的问题，缓存架构中引入各种解决方案和技术，解决高可用的问题
	
## 6. 准备好CentOS集群

## 7. 单机版redis的安装以及redis生产环境启动方案

## 8. redis持久化机对于生产环境中的灾难恢复的意义
	redis持久化的意义：在于数据备份，以便于故障恢复。
	如果没有持久化的话，redis遇到灾难性故障的时候，就会丢失所有的数据。
	如果通过持久化将数据备份在磁盘上，然后定期同步和备份到其它存储上，
	那么就可以保证数据不全部丢失，还是可以恢复一部分数据回来的。


